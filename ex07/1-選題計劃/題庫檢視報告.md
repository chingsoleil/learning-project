# IPIP 題庫檢視報告

## 📊 資料概況

### 檔案來源
- **InstrumentCategory.csv**：36 個量表（Instruments）
- **TraitCategory.csv**：246 個特質（Traits）
- **QuestionBank.csv**：3,805 題

### 資料庫結構

#### 1. InstrumentCategory（量表分類）
- **欄位**：Id, NameEn, NameZh, Code, Description, IsActive, CreatedAt, UpdatedAt
- **總數**：36 個量表
- **核心 Instruments**（符合設計原則）：
  - ✅ **16PF** (Id=1) - 16種人格因素問卷
  - ✅ **BFAS** (Id=6) - 大五人格簡短量表
  - ✅ **HEXACO_PI** (Id=18) - HEXACO人格量表
  - ✅ **NEO** (Id=26) - NEO人格量表
  - ⚠️ **BigFive** - 需要確認是否存在（可能名稱不同）

#### 2. TraitCategory（特質分類）
- **欄位**：Id, NameEn, NameZh, Code, Description, IsActive, CreatedAt, UpdatedAt
- **總數**：246 個特質
- **大五核心 Traits**（需確認 Id）：
  - Extraversion（外向性）
  - Agreeableness（親和性）
  - Conscientiousness（盡責性）
  - Neuroticism（神經質）
  - Openness（開放性）

#### 3. QuestionBank（題庫主檔）
- **欄位結構**（推測）：
  - Id：題目 ID
  - InstrumentCategoryId：量表分類 ID（外鍵）
  - TraitCategoryId：特質分類 ID（外鍵）
  - TextEn：英文題目
  - TextZh：中文題目
  - Alpha：信度係數（第一個值）
  - Alpha2：信度係數（第二個值，可選）
  - ScoringKey：計分鍵（1=正向, -1=反向）
  - IPIPItemNumber：IPIP 題目編號
  - IsActive：是否啟用
  - CreatedAt, UpdatedAt：時間戳記

- **總數**：3,805 題
- **信度範圍**：從樣本看到 Alpha 值在 0.76-0.86 之間，符合 ≥ 0.70 的要求

---

## 🔍 關鍵發現

### 1. 資料完整性
- ✅ 所有題目都有中英文版本
- ✅ 信度係數（Alpha）資料完整
- ✅ 計分鍵（ScoringKey）標記清楚
- ⚠️ 需要確認：BigFive 是否存在，或是否以其他名稱存在（如 Goldberg1999）

### 2. 資料品質
- ✅ Alpha 值範圍良好（0.76-0.86），符合設計原則要求（≥ 0.70）
- ✅ 正向題與反向題都有標記（ScoringKey = 1 或 -1）
- ✅ 題目已翻譯為繁體中文

### 3. 可用性評估
- ✅ 題庫規模充足（3,805 題），足夠設計 5 份各 50 題的測驗
- ✅ Instruments 多樣化（36 個），符合多樣性原則
- ✅ Traits 豐富（246 個），可滿足不同測驗主題需求

---

## 📋 下一步工作建議

### 步驟 1：確認 Instruments 對應
- [ ] 確認 BigFive 是否存在，或找到對應的 Instrument（可能是 Goldberg1999）
- [ ] 確認 5 個核心 Instruments 的 Id：
  - 16PF (Id=1) ✅
  - BigFive / Goldberg1999 (需確認)
  - NEO (Id=26) ✅
  - HEXACO_PI (Id=18) ✅
  - BFAS (Id=6) ✅

### 步驟 2：確認 Traits 對應
- [ ] 找出大五核心 Traits 的 Id：
  - Extraversion（外向性）
  - Agreeableness（親和性）
  - Conscientiousness（盡責性）
  - Neuroticism（神經質）
  - Openness（開放性）
- [ ] 找出細分 Traits 的 Id（如 Gregariousness, Assertiveness 等）

### 步驟 3：題目篩選與統計
- [ ] 統計每個 Instrument 的題目數量
- [ ] 統計每個 Trait 的題目數量
- [ ] 統計符合 alpha ≥ 0.70 的題目數量
- [ ] 統計正向題與反向題的比例

### 步驟 4：測驗設計執行
根據 `測驗設計原則文件.md` 的規劃，開始選題：
1. 測驗 1：大五人格快速評估
2. 測驗 2：職場人格評估
3. 測驗 3：情緒與人際關係
4. 測驗 4：創造力與開放性
5. 測驗 5：全面人格評估

---

## ⚠️ 注意事項

1. **CSV 檔案沒有標題列**：QuestionBank.csv 直接從資料開始，需要手動確認欄位順序
2. **編碼問題**：確保使用 UTF-8 編碼讀取，避免中文亂碼
3. **資料驗證**：需要驗證 InstrumentCategoryId 和 TraitCategoryId 的外鍵關係是否正確
4. **重複題目**：需要檢查是否有重複的題目（相同 TextEn 或 TextZh）

---

## 📝 建議的查詢腳本

為了更好地了解題庫，建議執行以下查詢：

### 1. 統計各 Instrument 的題目數量
```sql
SELECT 
    ic.NameEn AS Instrument,
    ic.NameZh AS InstrumentZh,
    COUNT(qb.Id) AS QuestionCount
FROM QuestionBank qb
INNER JOIN InstrumentCategory ic ON qb.InstrumentCategoryId = ic.Id
WHERE qb.IsActive = 1
GROUP BY ic.Id, ic.NameEn, ic.NameZh
ORDER BY QuestionCount DESC;
```

### 2. 統計各 Trait 的題目數量
```sql
SELECT 
    tc.NameEn AS Trait,
    tc.NameZh AS TraitZh,
    COUNT(qb.Id) AS QuestionCount
FROM QuestionBank qb
INNER JOIN TraitCategory tc ON qb.TraitCategoryId = tc.Id
WHERE qb.IsActive = 1
GROUP BY tc.Id, tc.NameEn, tc.NameZh
ORDER BY QuestionCount DESC;
```

### 3. 統計信度分布
```sql
SELECT 
    CASE 
        WHEN Alpha >= 0.80 THEN '0.80-1.00 (優秀)'
        WHEN Alpha >= 0.75 THEN '0.75-0.79 (良好)'
        WHEN Alpha >= 0.70 THEN '0.70-0.74 (可接受)'
        WHEN Alpha < 0.70 THEN '< 0.70 (需檢視)'
        ELSE '無資料'
    END AS AlphaRange,
    COUNT(*) AS Count
FROM QuestionBank
WHERE IsActive = 1
GROUP BY 
    CASE 
        WHEN Alpha >= 0.80 THEN '0.80-1.00 (優秀)'
        WHEN Alpha >= 0.75 THEN '0.75-0.79 (良好)'
        WHEN Alpha >= 0.70 THEN '0.70-0.74 (可接受)'
        WHEN Alpha < 0.70 THEN '< 0.70 (需檢視)'
        ELSE '無資料'
    END
ORDER BY MIN(Alpha) DESC;
```

### 4. 統計計分方向分布
```sql
SELECT 
    CASE ScoringKey
        WHEN 1 THEN '正向題'
        WHEN -1 THEN '反向題'
        ELSE '其他'
    END AS ScoringDirection,
    COUNT(*) AS Count,
    ROUND(COUNT(*) * 100.0 / (SELECT COUNT(*) FROM QuestionBank WHERE IsActive = 1), 2) AS Percentage
FROM QuestionBank
WHERE IsActive = 1
GROUP BY ScoringKey;
```

---

## ✅ 檢視完成

題庫資料結構清晰，資料完整，可以開始進行測驗設計工作。

**建議下一步**：執行上述查詢腳本，獲取詳細統計資訊，然後根據 `測驗設計原則文件.md` 開始選題。

